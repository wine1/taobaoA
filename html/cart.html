<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shopping cart</title>
	<link rel="stylesheet" href="../css/style.css" />
</head>

<body>
	<div class="nav">
		<div class="wrap-nav">
			<ul class="nav-left">
				<li>中国大陆</li>
				<li class="color-red">
					<a href="login.html">亲，请登录</a>
				</li>
				<li>
					<a href="reg.html">免费注册</a>
				</li>
				<li>
					<a href="javascript:;">手机逛淘宝</a>
				</li>
			</ul>
			<ul class="nav-right">
				<li>
					<a href="./index.html">淘宝网首页</a>
				</li>
				<li>
					<a href="javascript:;">我的淘宝</a>
					<span class="mytaobao">已买到的
						<br>我的足迹</span>
				</li>
				<li>
					<i class="fa fa-shopping-cart"></i>
					<a href="cart.html">购物车</a>
				</li>
				<li>
					<i class="fa fa-star"></i>
					<a href="javascript:;">收藏夹</a>
				</li>
				<li>
					<a href="javascript:;">商品分类</a>
				</li>
				<li>
					<a href="javascript:;">卖家中心</a>
				</li>
				<li>
					<a href="javascript:;">联系客服</a>
				</li>
				<li>
					<i class="fa fa-list"></i>
					<a href="javascript:;">网站导航</a>
				</li>
			</ul>

			<div class="wrap-hi">
				<div class="gouwuche">
					<p>您的购物车里还没有任何宝贝
						<span>查看我的购物车</span>
					</p>
				</div>
				<div class="shoucangjia">
					<li>收藏的宝贝</li>
					<li>收藏的店铺</li>
				</div>
				<div class="maijia">
					<li>卖出的宝贝</li>
					<li>免费开店</li>
				</div>
				<div class="kefu">
					<li>卖家客服</li>
					<li>消费者客服</li>
				</div>
			</div>

		</div>
	</div>
	<!-- 顶部导航栏结束 -->
	<!-- <div class="wrap-search">
		<!--圣杯布局-->
	<!-- <div class="search">
			<ul class="search-nav">
				<li>宝贝</li>
				<li>天猫</li>
				<li>店铺</li>
			</ul>
			<div class="wrap-input">
				<input type="text" name="" id="" placeholder="小裙子">
				<p id="search-btn">搜索</p>
			</div>
		</div>
		<div class="logo">
			<a href="index.html">
				<img src="../img/logo.jpg" />
			</a>
		</div>
		<div class="erweima">
			<img src="../img/二维码.jpg">
		</div>
	</div>
	圣杯布局结束  -->

	<div class="cart">
		<div class="cart-top">
			<ul class="cart-nav">
				<li>全部商品
					<span id="allnum"></span>
				</li>
				<li>降价商品
					<span>0</span>
				</li>
			</ul>
			<div class="settlement">
				<p>已选商品（不含运费）
					<span class="count">0.00</span>
				</p>
				<input type="button" name="jiesuan" disabled value="结算">
			</div>
			<!-- <div class="clear"></div> -->
		</div>
		<ul class="cart-table">
			<li>
				<label class="quanxuan">
					<input class="checkall" type="checkbox">
					<span>全选</span>
				</label>
			</li>
			<li>商品信息</li>
			<li>单价</li>
			<li>数量</li>
			<li>金额</li>
			<li>操作</li>
		</ul>
		<div class="shop">
			<p class="shopname">
				<input type="checkbox" class="ckeckshop" name=""> 店铺：
				<span class="shopname">veromode官方旗舰店</span>
				<span class="baoyou">一件包邮</span>
			</p>
			<div class="bundle">
				<div class="goodslist">
					<ul class="goods">
						<li class="goods-check">
							<input class="check" type="checkbox">
						</li>
						<li class="goods-img">
							<img src="../img/veromoda.jpg" alt="">
						</li>
						<li class="goods-name">
							<p>veromoda网纱五分袖连衣裙</p>
							<span>
								<a href="javascript:;">
									<img src="../img/baozhang.png" alt="">
								</a>
								<a href="javascript:;">
									<img src="../img/qitain.png" alt="">
								</a>
							</span>
						</li>
						<li class="goods-details">
							<p class="goods-color">颜色分类:
								<span>C15斑比粉色</span>
							</p>
							<p class="goods-size">尺码：
								<span>155/76A/XS</span>
							</p>
						</li>
						<li class="goods-price">￥
							<span class="price">849.00</span>
						</li>
						<li class="goods-amount">
							<p>
								<span class="reduce">-</span>
								<input type="text" class="shuliang" value="1">
								<span class="sum">+</span>
							</p>
						</li>
						<li class="goods-total">￥
							<span class="total">849</span>
						</li>
						<li class="goods-operate">
							<span class="move">移入收藏夹</span>
							<span class="delete">删除</span>
						</li>
					</ul>
					<ul class="goods">
						<li class="goods-check">
							<input class="check" type="checkbox">
						</li>
						<li class="goods-img">
							<img src="../img/veromoda.jpg" alt="">
						</li>
						<li class="goods-name">
							<p>veromoda网纱五分袖连衣裙</p>
							<span>
								<a href="javascript:;">
									<img src="../img/baozhang.png" alt="">
								</a>
								<a href="javascript:;">
									<img src="../img/qitain.png" alt="">
								</a>
							</span>
						</li>
						<li class="goods-details">
							<p class="goods-color">颜色分类:
								<span>C15斑比粉色</span>
							</p>
							<p class="goods-size">尺码：
								<span>155/76A/XS</span>
							</p>
						</li>
						<li class="goods-price">￥
							<span class="price">849.00</span>
						</li>
						<li class="goods-amount">
							<p>
								<span class="reduce">-</span>
								<input type="text" class="shuliang" value="1">
								<span class="sum">+</span>
							</p>
						</li>
						<li class="goods-total">￥
							<span class="total">849</span>
						</li>
						<li class="goods-operate">
							<span class="move">移入收藏夹</span>
							<span class="delete">删除</span>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="shop">
			<p class="shopname">
				<input type="checkbox" class="ckeckshop" name=""> 店铺：
				<span class="shopname">veromode官方旗舰店</span>
				<span class="baoyou">一件包邮</span>
			</p>
			<div class="bundle">
				<div class="goodslist">
					<ul class="goods">
						<li class="goods-check">
							<input class="check" type="checkbox">
						</li>
						<li class="goods-img">
							<img src="../img/veromoda.jpg" alt="">
						</li>
						<li class="goods-name">
							<p>veromoda网纱五分袖连衣裙</p>
							<span>
								<a href="javascript:;">
									<img src="../img/baozhang.png" alt="">
								</a>
								<a href="javascript:;">
									<img src="../img/qitain.png" alt="">
								</a>
							</span>
						</li>
						<li class="goods-details">
							<p class="goods-color">颜色分类:
								<span>C15斑比粉色</span>
							</p>
							<p class="goods-size">尺码：
								<span>155/76A/XS</span>
							</p>
						</li>
						<li class="goods-price">￥
							<span class="price">849.00</span>
						</li>
						<li class="goods-amount">
							<p>
								<span class="reduce">-</span>
								<input type="text" class="shuliang" value="1">
								<span class="sum">+</span>
							</p>
						</li>
						<li class="goods-total">￥
							<span class="total">849</span>
						</li>
						<li class="goods-operate">
							<span class="move">移入收藏夹</span>
							<span class="delete">删除</span>
						</li>
					</ul>
					<ul class="goods">
						<li class="goods-check">
							<input class="check" type="checkbox">
						</li>
						<li class="goods-img">
							<img src="../img/veromoda.jpg" alt="">
						</li>
						<li class="goods-name">
							<p>veromoda网纱五分袖连衣裙</p>
							<span>
								<a href="javascript:;">
									<img src="../img/baozhang.png" alt="">
								</a>
								<a href="javascript:;">
									<img src="../img/qitain.png" alt="">
								</a>
							</span>
						</li>
						<li class="goods-details">
							<p class="goods-color">颜色分类:
								<span>C15斑比粉色</span>
							</p>
							<p class="goods-size">尺码：
								<span>155/76A/XS</span>
							</p>
						</li>
						<li class="goods-price">￥
							<span class="price">849.00</span>
						</li>
						<li class="goods-amount">
							<p>
								<span class="reduce">-</span>
								<input type="text" class="shuliang" value="1">
								<span class="sum">+</span>
							</p>
						</li>
						<li class="goods-total">￥
							<span class="total">849</span>
						</li>
						<li class="goods-operate">
							<span class="move">移入收藏夹</span>
							<span class="delete">删除</span>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>

	<div class="bott-nav">
		<ul class="le">
			<li>
				<input type="checkbox" class="checkall">
				<span id="xuanbuxuan">全选</span>
			</li>
			<li id="delall">删除</li>
			<li>清除失效宝贝</li>
			<li>移入收藏夹</li>
			<li>分享</li>
		</ul>
		<ul class="ri">
			<li>已选商品
				<span class="choosed">0</span>件</li>
			<li>合计（不含运费）：
				<span class="count">0.00</span>
			</li>

			<li>
				<input type="button" name="jiesuan" disabled value="结算">
			</li>
		</ul>
	</div>
	</div>
	</div>

	<script src="../js/jquery-3.2.1.min.js"></script>
	<script src="../js/main.js"></script>
	<script type="text/javascript">
		$(function () {
			// 网页加载完成时执行
			$('#allnum').text($('.goods').length);
			// 改变全部商品数量
			function changeAllnum() {
				$('#allnum').text($('.goods').length);
			}

			// 全选和全不选切换
			$('.checkall').click(function () {
				if (this.checked) {
					$('input[type="checkbox"').prop('checked', true);
					$('.quanxuan>span,#xuanbuxuan').text('全不选');
				} else {
					$('input[type="checkbox"').prop('checked', false);
					$('.quanxuan>span,#xuanbuxuan').text('全选');
				}
			});
			// 同一家店的全选和全不选切换
			$('.ckeckshop').click(function () {
				if (this.checked) {
					$(this).parents('.shop').find('.check').prop('checked', true);
				} else {
					$(this).parents('.shop').find('.check').prop('checked', false);
				}
				count();
				// var chk = 0;
				// var chknum = $(this).parents('.shop').find('.check').length;
				// var check = $(this).parents('.shop').find('.check');
				// check.each(function () {  
				// 	if(check.prop("checked")) {
				// 		chk++;
				// 	}
				// 	if(chk == chknum) {
				// 		$(this).prop("checked",true);
				// 	}else {
				// 		$(this).prop("checked",false);
				// 	}
				// })
			});
			// 当有任意选项为不选时全选状态改变
			$('input[type=checkbox]').click(function () {
				count();
				allchk();

			})

			function allchk() {
				var chknum = $(".check").length; //选项总个数
				var chk = 0;
				$(".check").each(function () {
					if ($(this).prop("checked") == true) {
						chk++;
					}
				});
				if (chknum == chk) { //全选
					$(".checkall").prop("checked", true);
					$('.quanxuan>span,#xuanbuxuan').text('全不选');
				} else { //不全选
					$(".checkall").prop("checked", false);
					$('.quanxuan>span,#xuanbuxuan').text('全选');
				}
			}
			// 被选择的商品总金额和总数量改变
			function count() {
				var count = 0;
				var n = 0;
				$(".check").each(function () {
					if ($(this).prop('checked')) {
						var total = $(this).parent().siblings().find('.total').text();
						console.log(total);
						count = count + parseInt(total);
						++n;
					}
					console.log(n);
					$('.choosed').text(n);
					console.log(count);
					$('.count').text(count);
					if (count > 0) {
						$('input[type=button]').prop('disabled', false);
					} else {
						$('input[type=button]').prop('disabled', true);
					}
				});
			}

			// 增加商品数量
			$('.sum').click(function () {
				var value = $(this).prev().val();
				value++;
				$(this).prev().val(value);
				var price = $(this).parent().parent().prev().children('span').text();
				$(this).parent().parent().next().children('span').text(value * price);
				count();
			});
			// 减少商品数量
			$('.reduce').click(function () {
				var value = $(this).next().val();
				if (value > 1) {
					value--;
					$(this).next().val(value);
					var price = $(this).parent().parent().prev().children('span').text();
					$(this).parent().parent().next().children('span').text(value * price);
				}
				count();
			});
			// 商品数量改变时总价变化
			$('.shuliang').change(function () {
				var value = $(this).val();
				var price = $(this).parent().parent().prev().children('span').text();
				$(this).parent().parent().next().children('span').text(value * price);
				count();
			})
			// 删除商品
			$('.delete').on('click', function () {
				var del = $(this).parents('ul');
				del.remove();
				changeAllnum();
				count();
				delshop();
			})

			// 当一个商店的商品为空时删除店铺信息
			function delshop() {
				$('.shop').each(function () {
					if ($(this).find('.check').length == 0) {
						$(this).remove();
					}
				})
			}
			// 底部导航栏批量删除
			$('#delall').click(function () {
				$('.check').each(function () {
					if (this.checked) {
						$(this).parents('.goods').remove();
					}
				})
				$('.choosed').text(0);
				$('.count').text(0);
				$('input[type=button]').prop('disabled', true);
				count();
				changeAllnum();
				delshop();
			});
		})
	</script>
	<!-- <script src="../js/cart.js"></script> -->
</body>

</html>